<header class="app-header" *ngIf="usuarioLogado$ | async as usuario; else cabecalhoDeslogado">
  <button class="sidebar-toggle" (click)="toggleSidebar()" title="Abrir menu">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
  </button>
  <a routerLink="/home" class="header-brand">
    <img src="assets/img/acrevisita.png" alt="Logo AcreVisita" class="header-logo">
  </a>
  
  <div class="user-menu" (click)="toggleUserMenu()" [class.open]="userMenuOpen">
    <span class="user-greeting">Olá, {{ usuario.nome }}</span>
    <div class="avatar-placeholder">{{ usuario.nome.charAt(0) }}</div>

    <div class="dropdown-menu">
      <a routerLink="/perfil" (click)="closeUserMenu()">Meu Perfil</a>
      <a (click)="logout()" class="logout-link">Sair</a>
    </div>
  </div>
</header>

<ng-template #cabecalhoDeslogado>
  <header class="app-header">
    <a routerLink="/login" class="header-brand">
      <img src="assets/img/acrevisita.png" alt="Logo AcreVisita" class="header-logo">
    </a>
    <div class="auth-buttons">
      <a routerLink="/login" class="btn-login">Entrar</a>
      <a routerLink="/cadastro" class="btn-cadastro">Cadastre-se</a>
    </div>
  </header>
</ng-template>

<aside class="app-sidebar" [class.open]="isSidebarOpen" *ngIf="usuarioLogado$ | async as usuario">
  <nav class="sidebar-nav">
    <a routerLink="/home" routerLinkActive="active-link" (click)="closeSidebar()">Início</a>
    <hr>
    <ng-container *ngIf="isVisitante(usuario)">
      <span class="nav-section-title">Minha Conta</span>
      <a routerLink="/minhas-visitas" routerLinkActive="active-link" (click)="closeSidebar()">Minhas Visitas</a>
      <a routerLink="/meu-endereco" routerLinkActive="active-link" (click)="closeSidebar()">Meu Endereço</a>
      <a routerLink="/perfil" routerLinkActive="active-link" (click)="closeSidebar()">Meu Perfil</a>
      <hr>
      <span class="nav-section-title">Ações</span>
      <a routerLink="/visitar" routerLinkActive="active-link" (click)="closeSidebar()">Fazer Visita</a>
      <a routerLink="/auditorio/reservar" routerLinkActive="active-link" (click)="closeSidebar()">Reservar Auditório</a>
      <a routerLink="/filmoteca/sugestao" routerLinkActive="active-link" (click)="closeSidebar()">Sugerir Filme</a>
    </ng-container>
    <ng-container *ngIf="isFuncionario(usuario)">
      <span class="nav-section-title">Operacional</span>
      <a routerLink="/visita/gerenciar" routerLinkActive="active-link" (click)="closeSidebar()">Gerenciar Visitas</a>
      <a routerLink="/admin/gerenciar-documentos" routerLinkActive="active-link" (click)="closeSidebar()">Gerenciar Documentos</a>
      <a routerLink="/feedback/listar" routerLinkActive="active-link" (click)="closeSidebar()">Ver Feedbacks</a>
    </ng-container>
    <ng-container *ngIf="isCoordenadorOuAdmin(usuario)">
      <hr>
      <span class="nav-section-title">Gestão</span>
      <a routerLink="/auditorio/gerenciar-reservas" routerLinkActive="active-link" (click)="closeSidebar()">Gerenciar Reservas</a>
      <a routerLink="/admin/auditorios" routerLinkActive="active-link" (click)="closeSidebar()">Gerenciar Auditórios</a>
    </ng-container>
    <ng-container *ngIf="isAdmin(usuario)">
      <hr>
      <span class="nav-section-title">Sistema</span>
      <a routerLink="/admin/funcionarios" routerLinkActive="active-link" (click)="closeSidebar()">Gerenciar Funcionários</a>
      <a routerLink="/admin/setores" routerLinkActive="active-link" (click)="closeSidebar()">Gerenciar Setores</a>
    </ng-container>
  </nav>
</aside>
<div class="sidebar-overlay" [class.visible]="isSidebarOpen" (click)="closeSidebar()"></div>

<main class="content-container">
  <router-outlet></router-outlet>
</main>

<footer class="app-footer">
  <section class="footer-brand">
    <img src="assets/img/brasao-acre.png" alt="Brasão do Estado do Acre" class="footer-logo">
    <img src="assets/img/logo-fem.png" alt="Logo da Fundação Elias Mansour" class="footer-logo">
  </section>
  <section class="footer-info">
    <p class="app-name">AcreVisita</p>
    <p class="copyright-text">© 2025 Fundação Elias Mansour. Todos os direitos reservados.</p>
    <nav class="footer-links">
      <a href="#">Termos de Uso</a>
      <span>&bull;</span>
      <a href="#">Política de Privacidade</a>
    </nav>
  </section>
  <section class="footer-contact">
    <p><strong>Contato</strong></p>
    <p>📞 (68) 3223-1414</p>
    <p>📧 <a href="mailto:contato@fem.ac.gov.br">contato@fem.ac.gov.br</a></p>
  </section>
</footer>