<header class="app-header" *ngIf="usuarioLogado$ | async as usuario; else cabecalhoDeslogado">
  <button class="sidebar-toggle" (click)="toggleSidebar()" title="Abrir menu">
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
  </button>
  <a routerLink="/home" class="header-brand">
    <img src="assets/img/LogoAcreVisita.png" alt="Logo AcreVisita" class="header-logo">
  </a>
  
  <div class="user-menu" (click)="toggleUserMenu()" [class.open]="userMenuOpen">
    <span class="user-greeting">Olá, {{ usuario.nome }}</span>
    <div class="avatar-placeholder">{{ usuario.nome.charAt(0) }}</div>

    <div class="dropdown-menu">
      <a routerLink="/perfil" (click)="closeUserMenu()">Meu Perfil</a>
      <a (click)="logout()" class="logout-link">Sair</a>
    </div>
  </div>
</header>

<ng-template #cabecalhoDeslogado>
  <header class="app-header">
    <a routerLink="/login" class="header-brand">
      <img src="assets/img/acrevisita.png" alt="Logo AcreVisita" class="header-logo">
    </a>
    <div class="auth-buttons">
      <a routerLink="/login" class="btn-login">Entrar</a>
      <a routerLink="/cadastro" class="btn-cadastro">Cadastre-se</a>
    </div>
  </header>
</ng-template>

<aside class="app-sidebar" [class.open]="isSidebarOpen" *ngIf="usuarioLogado$ | async as usuario">
  <nav class="sidebar-nav">
    <a routerLink="/home" routerLinkActive="active-link" (click)="closeSidebar()">Início</a>
    <hr>
    <ng-container *ngIf="isVisitante(usuario)">
      <span class="nav-section-title">Minha Conta</span>
      <a routerLink="/minhas-visitas" routerLinkActive="active-link" (click)="closeSidebar()">Minhas Visitas</a>
      <a routerLink="/endereco/form" routerLinkActive="active-link" (click)="closeSidebar()">Meu Endereço</a>
      <a routerLink="/perfil" routerLinkActive="active-link" (click)="closeSidebar()">Meu Perfil</a>
      <hr>
      <span class="nav-section-title">Ações</span>
      <a routerLink="/visita/fazer" routerLinkActive="active-link" (click)="closeSidebar()">Fazer Visita</a>
      <a routerLink="/auditorio/reservar" routerLinkActive="active-link" (click)="closeSidebar()">Reservar Auditório</a>
      <a routerLink="/filmoteca/sugestao" routerLinkActive="active-link" (click)="closeSidebar()">Sugerir Filme</a>
    </ng-container>
    
    <ng-container *ngIf="isFuncionario(usuario)">
      <span class="nav-section-title">Operacional</span>
      <a routerLink="/visita/gerenciar" routerLinkActive="active-link" (click)="closeSidebar()">Gerenciar Visitas</a>
      <a routerLink="/documentos/list" routerLinkActive="active-link" (click)="closeSidebar()">Gerenciar Documentos</a>
      <a routerLink="/feedback/listar" routerLinkActive="active-link" (click)="closeSidebar()">Ver Feedbacks</a>
      <a routerLink="/relatorio/graficos" routerLinkActive="active-link" (click)="closeSidebar()">Relatórios</a>
    </ng-container>
    
    <ng-container *ngIf="isCoordenadorOuAdmin(usuario)">
      <hr>
      <span class="nav-section-title">Gestão</span>
      <a routerLink="/auditorio/gerenciar-reservas" routerLinkActive="active-link" (click)="closeSidebar()">Gerenciar Reservas</a>
      <a routerLink="/auditorio/list" routerLinkActive="active-link" (click)="closeSidebar()">Gerenciar Auditórios</a>
    </ng-container>
    
    <ng-container *ngIf="isAdmin(usuario)">
      <hr>
      <span class="nav-section-title">Sistema</span>
      <a routerLink="/funcionario/list" routerLinkActive="active-link" (click)="closeSidebar()">Gerenciar Funcionários</a>
      <a routerLink="/setor/list" routerLinkActive="active-link" (click)="closeSidebar()">Gerenciar Setores</a>
    </ng-container>
  </nav>
</aside>
<div class="sidebar-overlay" [class.visible]="isSidebarOpen" (click)="closeSidebar()"></div>

<main class="content-container">
  <router-outlet></router-outlet>
</main>

<!-- RODAPÉ ATUALIZADO -->
<footer class="app-footer">
  <div class="footer-content">
    <section class="footer-brand">
      <div class="brand-logos">
        <img src="assets/img/acre-brasao.png" alt="Brasão do Estado do Acre" class="footer-logo">
        <img src="assets/img/fem-logo.png" alt="Logo da Fundação Elias Mansour" class="footer-logo">
      </div>
      <div class="footer-info">
        <p class="app-name">AcreVisita</p>
        <nav class="footer-links">
          <a href="#">Termos de Uso</a>
          <span>&bull;</span>
          <a href="#">Política de Privacidade</a>
        </nav>
      </div>
    </section>

    <section class="footer-contact">
      <h3>Contato</h3>
      <p>📞 (68) 3223-1414</p>
      <p>📧 <a href="mailto:contato@fem.ac.gov.br">contato@fem.ac.gov.br</a></p>
    </section>

    <section class="footer-social">
      <h3>Siga-nos</h3>
      <div class="social-icons">
        <a href="https://www.facebook.com/fundacaoeliasmansour/" target="_blank" rel="noopener noreferrer" class="social-icon facebook" aria-label="Facebook">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M9 8h-3v4h3v12h5v-12h3.642l.358-4h-4v-1.667c0-.955.192-1.333 1.115-1.333h2.885v-5h-3.808c-3.596 0-5.192 1.583-5.192 4.615v3.385z"/></svg>
        </a>
        <a href="https://www.instagram.com/fem.acre/" target="_blank" rel="noopener noreferrer" class="social-icon instagram" aria-label="Instagram">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.011 3.584-.069 4.85c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.069-1.645-.069-4.85s.011-3.584.069-4.85c.149-3.225 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.85-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948s.014 3.667.072 4.947c.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072s3.667-.014 4.947-.072c4.358-.2 6.78-2.618 6.98-6.98.059-1.281.073-1.689.073-4.948s-.014-3.667-.072-4.947c-.2-4.358-2.618-6.78-6.98-6.98-1.281-.059-1.689-.073-4.948-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.162 6.162 6.162 6.162-2.759 6.162-6.162-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4s1.791-4 4-4 4 1.79 4 4-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44 1.441-.645 1.441-1.44-.645-1.44-1.441-1.44z"/></svg>
        </a>
        <a href="https://www.youtube.com/c/FEMCultdoAcre" target="_blank" rel="noopener noreferrer" class="social-icon youtube" aria-label="YouTube">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/></svg>
        </a>
        <a href="https://open.spotify.com/user/31g7w3zjfvffsl56z7lsy2f34xaq" target="_blank" rel="noopener noreferrer" class="social-icon spotify" aria-label="Spotify">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm5.438 16.96c-.234.364-1.185.52-1.542.303-3.038-1.854-6.837-2.26-10.02-1.228-.403.132-.822-.126-.955-.529-.132-.402.126-.822.529-.954 3.534-1.107 7.772-.66 11.078 1.391.36.22.512.723.29 1.017zm1.2-3.235c-.292.455-1.125.61-1.578.322-3.41-2.078-8.58-2.687-11.826-1.482-.501.185-.985-.147-1.171-.648-.184-.501.148-.985.648-1.171 3.673-1.352 9.299-.693 13.065 1.639.45.281.603 1.127.314 1.577zm.19-3.475c-4.118-2.399-10.957-2.593-13.895-1.432-.587.231-1.191-.19-1.422-.777-.232-.587.19-1.191.777-1.422 3.371-1.328 10.743-1.114 15.356 1.575.529.309.734 1.176.425 1.704-.308.527-1.175.734-1.704.425z"/></svg>
        </a>
      </div>
    </section>
  </div>
  <div class="footer-bottom">
    <p class="copyright-text">© 2025 Fundação Elias Mansour. Todos os direitos reservados.</p>
  </div>
</footer>
